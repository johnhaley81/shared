'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.AccountSettingSchema = exports.AccountSettingPostBodySchema = exports.ZenDeskIntegrationSchema = exports.AccountIntegrationSchema = exports.TwitterFeedbackWithMaybeAnalysisSchema = exports.TwitterFeedbackSchema = exports.ZenDeskTicketWithMaybeAnalysisSchema = exports.ZenDeskTicketSchema = exports.ZenDeskTicketPostBodySchema = exports.EmailFeedbackWithMaybeAnalysisSchema = exports.EmailFeedbackSchema = exports.EmailFeedbackPostBodySchema = exports.FeedbackAnalysisSchema = exports.UserSchema = exports.EmailUserSchema = exports.TwitterUserSchema = exports.ZenDeskUserSchema = exports.getDynamoDbGlobalArn = exports.getTableNamePrefix = exports.getAnalyzeFeedbackTopicName = exports.getAnalyzeFeedbackSNS = undefined;

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

// https://github.com/benmosher/eslint-plugin-import/issues/921
/* eslint-disable import/named */


var _Arns = require('./Arns');

Object.defineProperty(exports, 'getAnalyzeFeedbackSNS', {
  enumerable: true,
  get: function get() {
    return _Arns.getAnalyzeFeedbackSNS;
  }
});
Object.defineProperty(exports, 'getAnalyzeFeedbackTopicName', {
  enumerable: true,
  get: function get() {
    return _Arns.getAnalyzeFeedbackTopicName;
  }
});
Object.defineProperty(exports, 'getTableNamePrefix', {
  enumerable: true,
  get: function get() {
    return _Arns.getTableNamePrefix;
  }
});
Object.defineProperty(exports, 'getDynamoDbGlobalArn', {
  enumerable: true,
  get: function get() {
    return _Arns.getDynamoDbGlobalArn;
  }
});

var _joiBrowser = require('joi-browser');

var _joiBrowser2 = _interopRequireDefault(_joiBrowser);

var _uuid = require('uuid');

var _uuid2 = _interopRequireDefault(_uuid);

var _YearMonthBucket = require('./YearMonthBucket');

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var ModelSavedFieldsSchema = {
  accountId: _joiBrowser2.default.string().required(),
  createdAt: _joiBrowser2.default.string().isoDate().required(),
  id: _joiBrowser2.default.string().guid().default(function () {
    return _uuid2.default.v4();
  }, 'uuid v4'),
  updatedAt: _joiBrowser2.default.string().isoDate()
};

var ZenDeskUserSchema = exports.ZenDeskUserSchema = _joiBrowser2.default.object({
  email: _joiBrowser2.default.string().email(),
  id: _joiBrowser2.default.number().min(0).required(),
  name: _joiBrowser2.default.string().required()
}).unknown();

var TwitterUserSchema = exports.TwitterUserSchema = _joiBrowser2.default.object({
  avatarUrl: _joiBrowser2.default.string().uri().required(),
  id: _joiBrowser2.default.string().required(),
  username: _joiBrowser2.default.string().required()
}).unknown();

var EmailUserSchema = exports.EmailUserSchema = _joiBrowser2.default.object({
  id: _joiBrowser2.default.string().email().required()
}).unknown();

var UserSchema = exports.UserSchema = _joiBrowser2.default.compile([TwitterUserSchema, EmailUserSchema, ZenDeskUserSchema]);

var FeedbackAnalysisSchema = exports.FeedbackAnalysisSchema = _joiBrowser2.default.object(_extends({}, ModelSavedFieldsSchema, {
  classification: _joiBrowser2.default.object().pattern(/./, _joiBrowser2.default.number()),
  content: _joiBrowser2.default.string().required(),
  feedbackId: _joiBrowser2.default.string().guid().default(function () {
    return _uuid2.default.v4();
  }, 'uuid v4'),
  feedbackType: _joiBrowser2.default.string().allow(['email', 'twitter', 'zenDesk']).required(),
  user: UserSchema,
  userId: _joiBrowser2.default.string().required()
})).unknown().required();

var EmailFeedbackPostBodySchema = exports.EmailFeedbackPostBodySchema = _joiBrowser2.default.object({
  content: _joiBrowser2.default.string().required(),
  emailSentDate: _joiBrowser2.default.string().isoDate().required(),
  from: _joiBrowser2.default.string().email().required(),
  subject: _joiBrowser2.default.string().required(),
  to: _joiBrowser2.default.string().email().required()
}).unknown().required();

var EmailFeedbackSchema = exports.EmailFeedbackSchema = EmailFeedbackPostBodySchema.keys(_extends({}, ModelSavedFieldsSchema)).unknown().required();

var EmailFeedbackWithMaybeAnalysisSchema = exports.EmailFeedbackWithMaybeAnalysisSchema = EmailFeedbackSchema.keys({
  analysis: FeedbackAnalysisSchema
}).unknown().required();

var ZenDeskTicketPostBodySchema = exports.ZenDeskTicketPostBodySchema = _joiBrowser2.default.object({
  description: _joiBrowser2.default.string().required(),
  ticketId: _joiBrowser2.default.number().required(),
  title: _joiBrowser2.default.string().required(),
  user: ZenDeskUserSchema.required()
}).unknown().required();

var ZenDeskTicketSchema = exports.ZenDeskTicketSchema = ZenDeskTicketPostBodySchema.keys(_extends({}, ModelSavedFieldsSchema)).unknown().required();

var ZenDeskTicketWithMaybeAnalysisSchema = exports.ZenDeskTicketWithMaybeAnalysisSchema = ZenDeskUserSchema.keys({
  analysis: FeedbackAnalysisSchema
}).unknown().required();

var TwitterFeedbackSchema = exports.TwitterFeedbackSchema = _joiBrowser2.default.object(_extends({}, ModelSavedFieldsSchema, {
  statusId: _joiBrowser2.default.string().required(),
  user: TwitterUserSchema.required()
})).unknown().required();

var TwitterFeedbackWithMaybeAnalysisSchema = exports.TwitterFeedbackWithMaybeAnalysisSchema = TwitterFeedbackSchema.keys({
  analysis: FeedbackAnalysisSchema
}).unknown().required();

var AccountIntegrationSchema = exports.AccountIntegrationSchema = _joiBrowser2.default.object({
  status: _joiBrowser2.default.string().valid(['disconnected', 'awaitingApproval', 'connected']).default('disconnected'),
  token: _joiBrowser2.default.string().required()
}).optionalKeys('token').unknown().default();

var ZenDeskIntegrationSchema = exports.ZenDeskIntegrationSchema = AccountIntegrationSchema.keys({
  confidenceThresholds: _joiBrowser2.default.object().pattern(/./, _joiBrowser2.default.number()).required(),
  fieldId: _joiBrowser2.default.number(),
  subdomain: _joiBrowser2.default.string().allow('').default(''),
  ticketImport: _joiBrowser2.default.object({
    inProgress: _joiBrowser2.default.boolean().default(false),
    nextPage: _joiBrowser2.default.number().default(0)
  }).unknown().default()
});

var AccountSettingPostBodySchema = exports.AccountSettingPostBodySchema = _joiBrowser2.default.object({
  integrations: _joiBrowser2.default.object({
    zenDesk: _joiBrowser2.default.object({
      confidenceThresholds: _joiBrowser2.default.object().pattern(/./, _joiBrowser2.default.number()).required()
    })
  }),
  twitterSearches: _joiBrowser2.default.array().items(_joiBrowser2.default.string()).default(function () {
    return [];
  }, 'Do not allow undefined or null to come out of the DB')
}).unknown().required();

var AccountSettingSchema = exports.AccountSettingSchema = _joiBrowser2.default.object(_extends({}, ModelSavedFieldsSchema, {
  apiToken: _joiBrowser2.default.string().guid(),
  feedbackUsageByDate: _joiBrowser2.default.object().pattern(_YearMonthBucket.YearMonthBucketRegex, _joiBrowser2.default.number().min(0).required()).required(),
  id: _joiBrowser2.default.string().required(),
  integrations: _joiBrowser2.default.object({
    zenDesk: ZenDeskIntegrationSchema
  }).default(),
  tier: _joiBrowser2.default.string().valid(['notApproved', 'free']).default('notApproved'),
  twitterSearches: _joiBrowser2.default.array().items(_joiBrowser2.default.string()).default(function () {
    return [];
  }, 'Do not allow undefined or null to come out of the DB')
})).unknown().required();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9pbmRleC5qcyJdLCJuYW1lcyI6WyJnZXRBbmFseXplRmVlZGJhY2tTTlMiLCJnZXRBbmFseXplRmVlZGJhY2tUb3BpY05hbWUiLCJnZXRUYWJsZU5hbWVQcmVmaXgiLCJnZXREeW5hbW9EYkdsb2JhbEFybiIsIk1vZGVsU2F2ZWRGaWVsZHNTY2hlbWEiLCJhY2NvdW50SWQiLCJzdHJpbmciLCJyZXF1aXJlZCIsImNyZWF0ZWRBdCIsImlzb0RhdGUiLCJpZCIsImd1aWQiLCJkZWZhdWx0IiwidjQiLCJ1cGRhdGVkQXQiLCJaZW5EZXNrVXNlclNjaGVtYSIsIm9iamVjdCIsImVtYWlsIiwibnVtYmVyIiwibWluIiwibmFtZSIsInVua25vd24iLCJUd2l0dGVyVXNlclNjaGVtYSIsImF2YXRhclVybCIsInVyaSIsInVzZXJuYW1lIiwiRW1haWxVc2VyU2NoZW1hIiwiVXNlclNjaGVtYSIsImNvbXBpbGUiLCJGZWVkYmFja0FuYWx5c2lzU2NoZW1hIiwiY2xhc3NpZmljYXRpb24iLCJwYXR0ZXJuIiwiY29udGVudCIsImZlZWRiYWNrSWQiLCJmZWVkYmFja1R5cGUiLCJhbGxvdyIsInVzZXIiLCJ1c2VySWQiLCJFbWFpbEZlZWRiYWNrUG9zdEJvZHlTY2hlbWEiLCJlbWFpbFNlbnREYXRlIiwiZnJvbSIsInN1YmplY3QiLCJ0byIsIkVtYWlsRmVlZGJhY2tTY2hlbWEiLCJrZXlzIiwiRW1haWxGZWVkYmFja1dpdGhNYXliZUFuYWx5c2lzU2NoZW1hIiwiYW5hbHlzaXMiLCJaZW5EZXNrVGlja2V0UG9zdEJvZHlTY2hlbWEiLCJkZXNjcmlwdGlvbiIsInRpY2tldElkIiwidGl0bGUiLCJaZW5EZXNrVGlja2V0U2NoZW1hIiwiWmVuRGVza1RpY2tldFdpdGhNYXliZUFuYWx5c2lzU2NoZW1hIiwiVHdpdHRlckZlZWRiYWNrU2NoZW1hIiwic3RhdHVzSWQiLCJUd2l0dGVyRmVlZGJhY2tXaXRoTWF5YmVBbmFseXNpc1NjaGVtYSIsIkFjY291bnRJbnRlZ3JhdGlvblNjaGVtYSIsInN0YXR1cyIsInZhbGlkIiwidG9rZW4iLCJvcHRpb25hbEtleXMiLCJaZW5EZXNrSW50ZWdyYXRpb25TY2hlbWEiLCJjb25maWRlbmNlVGhyZXNob2xkcyIsImZpZWxkSWQiLCJzdWJkb21haW4iLCJ0aWNrZXRJbXBvcnQiLCJpblByb2dyZXNzIiwiYm9vbGVhbiIsIm5leHRQYWdlIiwiQWNjb3VudFNldHRpbmdQb3N0Qm9keVNjaGVtYSIsImludGVncmF0aW9ucyIsInplbkRlc2siLCJ0d2l0dGVyU2VhcmNoZXMiLCJhcnJheSIsIml0ZW1zIiwiQWNjb3VudFNldHRpbmdTY2hlbWEiLCJhcGlUb2tlbiIsImZlZWRiYWNrVXNhZ2VCeURhdGUiLCJ0aWVyIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFLQTtBQUNBOzs7Ozs7OztpQkFRRUEscUI7Ozs7OztpQkFDQUMsMkI7Ozs7OztpQkFDQUMsa0I7Ozs7OztpQkFDQUMsb0I7Ozs7QUFmRjs7OztBQUNBOzs7O0FBSUE7Ozs7QUFvQkEsSUFBTUMseUJBQXlCO0FBQzdCQyxhQUFXLHFCQUFJQyxNQUFKLEdBQWFDLFFBQWIsRUFEa0I7QUFFN0JDLGFBQVcscUJBQUlGLE1BQUosR0FDUkcsT0FEUSxHQUVSRixRQUZRLEVBRmtCO0FBSzdCRyxNQUFJLHFCQUFJSixNQUFKLEdBQ0RLLElBREMsR0FFREMsT0FGQyxDQUVPO0FBQUEsV0FBTSxlQUFLQyxFQUFMLEVBQU47QUFBQSxHQUZQLEVBRXdCLFNBRnhCLENBTHlCO0FBUTdCQyxhQUFXLHFCQUFJUixNQUFKLEdBQWFHLE9BQWI7QUFSa0IsQ0FBL0I7O0FBbUJPLElBQU1NLGdEQUFvQixxQkFBSUMsTUFBSixDQUFXO0FBQzFDQyxTQUFPLHFCQUFJWCxNQUFKLEdBQWFXLEtBQWIsRUFEbUM7QUFFMUNQLE1BQUkscUJBQUlRLE1BQUosR0FDREMsR0FEQyxDQUNHLENBREgsRUFFRFosUUFGQyxFQUZzQztBQUsxQ2EsUUFBTSxxQkFBSWQsTUFBSixHQUFhQyxRQUFiO0FBTG9DLENBQVgs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SixFQURRLEVBRWRNLE9BRmMsQ0FFTjtBQUFBLFdBQU0sRUFBTjtBQUFBLEdBRk0sRUFFSSxzREFGSjtBQWxCaUIsSUFzQmpDUyxPQXRCaUMsR0F1QmpDZCxRQXZCaUMsRUFBN0IiLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBAZmxvd1xuXG5pbXBvcnQgSm9pIGZyb20gJ2pvaS1icm93c2VyJztcbmltcG9ydCB1dWlkIGZyb20gJ3V1aWQnO1xuXG4vLyBodHRwczovL2dpdGh1Yi5jb20vYmVubW9zaGVyL2VzbGludC1wbHVnaW4taW1wb3J0L2lzc3Vlcy85MjFcbi8qIGVzbGludC1kaXNhYmxlIGltcG9ydC9uYW1lZCAqL1xuaW1wb3J0IHtcbiAgWWVhck1vbnRoQnVja2V0UmVnZXgsXG4gIHR5cGUgWWVhck1vbnRoQnVja2V0VHlwZSxcbn0gZnJvbSAnLi9ZZWFyTW9udGhCdWNrZXQnO1xuLyogZXNsaW50LWVuYWJsZSAqL1xuXG5leHBvcnQge1xuICBnZXRBbmFseXplRmVlZGJhY2tTTlMsXG4gIGdldEFuYWx5emVGZWVkYmFja1RvcGljTmFtZSxcbiAgZ2V0VGFibGVOYW1lUHJlZml4LFxuICBnZXREeW5hbW9EYkdsb2JhbEFybixcbn0gZnJvbSAnLi9Bcm5zJztcblxuZXhwb3J0IHR5cGUgTW9kZWxTYXZlZEZpZWxkc1R5cGUgPSB7fFxuICBhY2NvdW50SWQ6IHN0cmluZyxcbiAgY3JlYXRlZEF0OiBzdHJpbmcsXG4gIGlkOiBzdHJpbmcsXG4gIHVwZGF0ZWRBdD86IHN0cmluZyxcbnx9O1xuXG5jb25zdCBNb2RlbFNhdmVkRmllbGRzU2NoZW1hID0ge1xuICBhY2NvdW50SWQ6IEpvaS5zdHJpbmcoKS5yZXF1aXJlZCgpLFxuICBjcmVhdGVkQXQ6IEpvaS5zdHJpbmcoKVxuICAgIC5pc29EYXRlKClcbiAgICAucmVxdWlyZWQoKSxcbiAgaWQ6IEpvaS5zdHJpbmcoKVxuICAgIC5ndWlkKClcbiAgICAuZGVmYXVsdCgoKSA9PiB1dWlkLnY0KCksICd1dWlkIHY0JyksXG4gIHVwZGF0ZWRBdDogSm9pLnN0cmluZygpLmlzb0RhdGUoKSxcbn07XG5cbmV4cG9ydCB0eXBlIEZlZWRiYWNrVHlwZSA9ICdlbWFpbCcgfCAndHdpdHRlcicgfCAnemVuRGVzayc7XG5cbmV4cG9ydCB0eXBlIFplbkRlc2tVc2VyVHlwZSA9IHt8XG4gIGVtYWlsOiBzdHJpbmcsXG4gIGlkOiBudW1iZXIsXG4gIG5hbWU6IHN0cmluZyxcbnx9O1xuXG5leHBvcnQgY29uc3QgWmVuRGVza1VzZXJTY2hlbWEgPSBKb2kub2JqZWN0KHtcbiAgZW1haWw6IEpvaS5zdHJpbmcoKS5lbWFpbCgpLFxuICBpZDogSm9pLm51bWJlcigpXG4gICAgLm1pbigwKVxuICAgIC5yZXF1aXJlZCgpLFxuICBuYW1lOiBKb2kuc3RyaW5nKCkucmVxdWlyZWQoKSxcbn0pLnVua25vd24oKTtcblxuZXhwb3J0IHR5cGUgVHdpdHRlclVzZXJUeXBlID0ge3xcbiAgYXZhdGFyVXJsOiBzdHJpbmcsXG4gIGlkOiBzdHJpbmcsXG4gIHVzZXJuYW1lOiBzdHJpbmcsXG58fTtcblxuZXhwb3J0IGNvbnN0IFR3aXR0ZXJVc2VyU2NoZW1hID0gSm9pLm9iamVjdCh7XG4gIGF2YXRhclVybDogSm9pLnN0cmluZygpXG4gICAgLnVyaSgpXG4gICAgLnJlcXVpcmVkKCksXG4gIGlkOiBKb2kuc3RyaW5nKCkucmVxdWlyZWQoKSxcbiAgdXNlcm5hbWU6IEpvaS5zdHJpbmcoKS5yZXF1aXJlZCgpLFxufSkudW5rbm93bigpO1xuXG5leHBvcnQgdHlwZSBFbWFpbFVzZXJUeXBlID0ge3xcbiAgaWQ6IHN0cmluZyxcbnx9O1xuXG5leHBvcnQgY29uc3QgRW1haWxVc2VyU2NoZW1hID0gSm9pLm9iamVjdCh7XG4gIGlkOiBKb2kuc3RyaW5nKClcbiAgICAuZW1haWwoKVxuICAgIC5yZXF1aXJlZCgpLFxufSkudW5rbm93bigpO1xuXG5leHBvcnQgdHlwZSBVc2VyVHlwZSA9IEVtYWlsVXNlclR5cGUgfCBUd2l0dGVyVXNlclR5cGUgfCBaZW5EZXNrVXNlclR5cGU7XG5cbmV4cG9ydCBjb25zdCBVc2VyU2NoZW1hID0gSm9pLmNvbXBpbGUoW1xuICBUd2l0dGVyVXNlclNjaGVtYSxcbiAgRW1haWxVc2VyU2NoZW1hLFxuICBaZW5EZXNrVXNlclNjaGVtYSxcbl0pO1xuXG5leHBvcnQgdHlwZSBGZWVkYmFja0FuYWx5c2lzVW5zYXZlZFR5cGUgPSB7fFxuICBhY2NvdW50SWQ6IHN0cmluZyxcbiAgY2xhc3NpZmljYXRpb246IHsgW2tleTogc3RyaW5nXTogbnVtYmVyIH0sXG4gIGNvbnRlbnQ6IHN0cmluZyxcbiAgZmVlZGJhY2tJZDogc3RyaW5nLFxuICBmZWVkYmFja1R5cGU6IEZlZWRiYWNrVHlwZSxcbiAgdXNlcjogVXNlclR5cGUsXG4gIHVzZXJJZDogc3RyaW5nLFxufH07XG5cbmV4cG9ydCB0eXBlIEZlZWRiYWNrQW5hbHlzaXNUeXBlID0ge1xuICAuLi5GZWVkYmFja0FuYWx5c2lzVW5zYXZlZFR5cGUsXG4gIC4uLk1vZGVsU2F2ZWRGaWVsZHNUeXBlLFxufTtcblxuZXhwb3J0IGNvbnN0IEZlZWRiYWNrQW5hbHlzaXNTY2hlbWEgPSBKb2kub2JqZWN0KHtcbiAgLi4uTW9kZWxTYXZlZEZpZWxkc1NjaGVtYSxcbiAgY2xhc3NpZmljYXRpb246IEpvaS5vYmplY3QoKS5wYXR0ZXJuKC8uLywgSm9pLm51bWJlcigpKSxcbiAgY29udGVudDogSm9pLnN0cmluZygpLnJlcXVpcmVkKCksXG4gIGZlZWRiYWNrSWQ6IEpvaS5zdHJpbmcoKVxuICAgIC5ndWlkKClcbiAgICAuZGVmYXVsdCgoKSA9PiB1dWlkLnY0KCksICd1dWlkIHY0JyksXG4gIGZlZWRiYWNrVHlwZTogSm9pLnN0cmluZygpXG4gICAgLmFsbG93KFsnZW1haWwnLCAndHdpdHRlcicsICd6ZW5EZXNrJ10pXG4gICAgLnJlcXVpcmVkKCksXG4gIHVzZXI6IFVzZXJTY2hlbWEsXG4gIHVzZXJJZDogSm9pLnN0cmluZygpLnJlcXVpcmVkKCksXG59KVxuICAudW5rbm93bigpXG4gIC5yZXF1aXJlZCgpO1xuXG5leHBvcnQgdHlwZSBFbWFpbEZlZWRiYWNrUG9zdEJvZHlUeXBlID0ge3xcbiAgY29udGVudDogc3RyaW5nLFxuICBlbWFpbFNlbnREYXRlOiBzdHJpbmcsXG4gIGZyb206IHN0cmluZyxcbiAgc3ViamVjdDogc3RyaW5nLFxuICB0bzogc3RyaW5nLFxufH07XG5cbmV4cG9ydCBjb25zdCBFbWFpbEZlZWRiYWNrUG9zdEJvZHlTY2hlbWEgPSBKb2kub2JqZWN0KHtcbiAgY29udGVudDogSm9pLnN0cmluZygpLnJlcXVpcmVkKCksXG4gIGVtYWlsU2VudERhdGU6IEpvaS5zdHJpbmcoKVxuICAgIC5pc29EYXRlKClcbiAgICAucmVxdWlyZWQoKSxcbiAgZnJvbTogSm9pLnN0cmluZygpXG4gICAgLmVtYWlsKClcbiAgICAucmVxdWlyZWQoKSxcbiAgc3ViamVjdDogSm9pLnN0cmluZygpLnJlcXVpcmVkKCksXG4gIHRvOiBKb2kuc3RyaW5nKClcbiAgICAuZW1haWwoKVxuICAgIC5yZXF1aXJlZCgpLFxufSlcbiAgLnVua25vd24oKVxuICAucmVxdWlyZWQoKTtcblxuZXhwb3J0IHR5cGUgRW1haWxGZWVkYmFja1Vuc2F2ZWRUeXBlID0ge3xcbiAgLi4uRW1haWxGZWVkYmFja1Bvc3RCb2R5VHlwZSxcbiAgYWNjb3VudElkOiBzdHJpbmcsXG58fTtcblxuZXhwb3J0IHR5cGUgRW1haWxGZWVkYmFja1R5cGUgPSB7XG4gIC4uLkVtYWlsRmVlZGJhY2tVbnNhdmVkVHlwZSxcbiAgLi4uTW9kZWxTYXZlZEZpZWxkc1R5cGUsXG59O1xuXG5leHBvcnQgY29uc3QgRW1haWxGZWVkYmFja1NjaGVtYSA9IEVtYWlsRmVlZGJhY2tQb3N0Qm9keVNjaGVtYS5rZXlzKHtcbiAgLi4uTW9kZWxTYXZlZEZpZWxkc1NjaGVtYSxcbn0pXG4gIC51bmtub3duKClcbiAgLnJlcXVpcmVkKCk7XG5cbmV4cG9ydCB0eXBlIEVtYWlsRmVlZGJhY2tXaXRoTWF5YmVBbmFseXNpc1R5cGUgPSB7XG4gIC4uLkVtYWlsRmVlZGJhY2tUeXBlLFxuICBhbmFseXNpczogP0ZlZWRiYWNrQW5hbHlzaXNUeXBlLFxufTtcblxuZXhwb3J0IGNvbnN0IEVtYWlsRmVlZGJhY2tXaXRoTWF5YmVBbmFseXNpc1NjaGVtYSA9IEVtYWlsRmVlZGJhY2tTY2hlbWEua2V5cyh7XG4gIGFuYWx5c2lzOiBGZWVkYmFja0FuYWx5c2lzU2NoZW1hLFxufSlcbiAgLnVua25vd24oKVxuICAucmVxdWlyZWQoKTtcblxuZXhwb3J0IHR5cGUgWmVuRGVza1RpY2tldFBvc3RCb2R5VHlwZSA9IHt8XG4gIGRlc2NyaXB0aW9uOiBzdHJpbmcsXG4gIHRpY2tldElkOiBudW1iZXIsXG4gIHRpdGxlOiBzdHJpbmcsXG4gIHVzZXI6IFplbkRlc2tVc2VyVHlwZSxcbnx9O1xuXG5leHBvcnQgY29uc3QgWmVuRGVza1RpY2tldFBvc3RCb2R5U2NoZW1hID0gSm9pLm9iamVjdCh7XG4gIGRlc2NyaXB0aW9uOiBKb2kuc3RyaW5nKCkucmVxdWlyZWQoKSxcbiAgdGlja2V0SWQ6IEpvaS5udW1iZXIoKS5yZXF1aXJlZCgpLFxuICB0aXRsZTogSm9pLnN0cmluZygpLnJlcXVpcmVkKCksXG4gIHVzZXI6IFplbkRlc2tVc2VyU2NoZW1hLnJlcXVpcmVkKCksXG59KVxuICAudW5rbm93bigpXG4gIC5yZXF1aXJlZCgpO1xuXG5leHBvcnQgdHlwZSBaZW5EZXNrVGlja2V0VW5zYXZlZFR5cGUgPSB7fFxuICAuLi5aZW5EZXNrVGlja2V0UG9zdEJvZHlUeXBlLFxuICBhY2NvdW50SWQ6IHN0cmluZyxcbnx9O1xuXG5leHBvcnQgdHlwZSBaZW5EZXNrVGlja2V0VHlwZSA9IHt8XG4gIC4uLlplbkRlc2tUaWNrZXRVbnNhdmVkVHlwZSxcbiAgLi4uTW9kZWxTYXZlZEZpZWxkc1R5cGUsXG58fTtcblxuZXhwb3J0IGNvbnN0IFplbkRlc2tUaWNrZXRTY2hlbWEgPSBaZW5EZXNrVGlja2V0UG9zdEJvZHlTY2hlbWEua2V5cyh7XG4gIC4uLk1vZGVsU2F2ZWRGaWVsZHNTY2hlbWEsXG59KVxuICAudW5rbm93bigpXG4gIC5yZXF1aXJlZCgpO1xuXG5leHBvcnQgdHlwZSBaZW5EZXNrVGlja2V0V2l0aE1heWJlQW5hbHlzaXNUeXBlID0ge1xuICAuLi5aZW5EZXNrVGlja2V0VHlwZSxcbiAgYW5hbHlzaXM6ID9GZWVkYmFja0FuYWx5c2lzVHlwZSxcbn07XG5cbmV4cG9ydCBjb25zdCBaZW5EZXNrVGlja2V0V2l0aE1heWJlQW5hbHlzaXNTY2hlbWEgPSBaZW5EZXNrVXNlclNjaGVtYS5rZXlzKHtcbiAgYW5hbHlzaXM6IEZlZWRiYWNrQW5hbHlzaXNTY2hlbWEsXG59KVxuICAudW5rbm93bigpXG4gIC5yZXF1aXJlZCgpO1xuXG5leHBvcnQgdHlwZSBUd2l0dGVyRmVlZGJhY2tVbnNhdmVkVHlwZSA9IHt8XG4gIGFjY291bnRJZDogc3RyaW5nLFxuICBzdGF0dXNJZDogc3RyaW5nLFxuICB1c2VyOiBUd2l0dGVyVXNlclR5cGUsXG58fTtcblxuZXhwb3J0IHR5cGUgVHdpdHRlckZlZWRiYWNrVHlwZSA9IHtcbiAgLi4uVHdpdHRlckZlZWRiYWNrVW5zYXZlZFR5cGUsXG4gIC4uLk1vZGVsU2F2ZWRGaWVsZHNUeXBlLFxufTtcblxuZXhwb3J0IGNvbnN0IFR3aXR0ZXJGZWVkYmFja1NjaGVtYSA9IEpvaS5vYmplY3Qoe1xuICAuLi5Nb2RlbFNhdmVkRmllbGRzU2NoZW1hLFxuICBzdGF0dXNJZDogSm9pLnN0cmluZygpLnJlcXVpcmVkKCksXG4gIHVzZXI6IFR3aXR0ZXJVc2VyU2NoZW1hLnJlcXVpcmVkKCksXG59KVxuICAudW5rbm93bigpXG4gIC5yZXF1aXJlZCgpO1xuXG5leHBvcnQgdHlwZSBUd2l0dGVyRmVlZGJhY2tXaXRoTWF5YmVBbmFseXNpc1R5cGUgPSB7XG4gIC4uLlR3aXR0ZXJGZWVkYmFja1R5cGUsXG4gIGFuYWx5c2lzOiA/RmVlZGJhY2tBbmFseXNpc1R5cGUsXG59O1xuXG5leHBvcnQgY29uc3QgVHdpdHRlckZlZWRiYWNrV2l0aE1heWJlQW5hbHlzaXNTY2hlbWEgPSBUd2l0dGVyRmVlZGJhY2tTY2hlbWEua2V5cyhcbiAge1xuICAgIGFuYWx5c2lzOiBGZWVkYmFja0FuYWx5c2lzU2NoZW1hLFxuICB9XG4pXG4gIC51bmtub3duKClcbiAgLnJlcXVpcmVkKCk7XG5cbmV4cG9ydCB0eXBlIEFjY291bnRUaWVyVHlwZSA9ICdub3RBcHByb3ZlZCcgfCAnZnJlZSc7XG5cbmV4cG9ydCB0eXBlIEFjY291bnRJbnRlZ3JhdGlvblN0YXR1c1R5cGUgPVxuICB8ICdkaXNjb25uZWN0ZWQnXG4gIHwgJ2F3YWl0aW5nQXBwcm92YWwnXG4gIHwgJ2Nvbm5lY3RlZCc7XG5cbmV4cG9ydCB0eXBlIEFjY291bnRJbnRlZ3JhdGlvblR5cGUgPSB7fFxuICBzdGF0dXM6IEFjY291bnRJbnRlZ3JhdGlvblN0YXR1c1R5cGUsXG4gIHRva2VuPzogc3RyaW5nLFxufH07XG5cbmV4cG9ydCB0eXBlIFplbkRlc2tJbnRlZ3JhdGlvblR5cGUgPSB7XG4gIC4uLkFjY291bnRJbnRlZ3JhdGlvblR5cGUsXG4gIGNvbmZpZGVuY2VUaHJlc2hvbGRzOiB7IFtrZXk6IHN0cmluZ106IG51bWJlciB9LFxuICBmaWVsZElkPzogbnVtYmVyLFxuICBzdWJkb21haW46IHN0cmluZyxcbiAgdGlja2V0SW1wb3J0OiB7XG4gICAgaW5Qcm9ncmVzczogYm9vbGVhbixcbiAgICBuZXh0UGFnZTogbnVtYmVyLFxuICB9LFxufTtcblxuZXhwb3J0IGNvbnN0IEFjY291bnRJbnRlZ3JhdGlvblNjaGVtYSA9IEpvaS5vYmplY3Qoe1xuICBzdGF0dXM6IEpvaS5zdHJpbmcoKVxuICAgIC52YWxpZChbJ2Rpc2Nvbm5lY3RlZCcsICdhd2FpdGluZ0FwcHJvdmFsJywgJ2Nvbm5lY3RlZCddKVxuICAgIC5kZWZhdWx0KCdkaXNjb25uZWN0ZWQnKSxcbiAgdG9rZW46IEpvaS5zdHJpbmcoKS5yZXF1aXJlZCgpLFxufSlcbiAgLm9wdGlvbmFsS2V5cygndG9rZW4nKVxuICAudW5rbm93bigpXG4gIC5kZWZhdWx0KCk7XG5cbmV4cG9ydCBjb25zdCBaZW5EZXNrSW50ZWdyYXRpb25TY2hlbWEgPSBBY2NvdW50SW50ZWdyYXRpb25TY2hlbWEua2V5cyh7XG4gIGNvbmZpZGVuY2VUaHJlc2hvbGRzOiBKb2kub2JqZWN0KClcbiAgICAucGF0dGVybigvLi8sIEpvaS5udW1iZXIoKSlcbiAgICAucmVxdWlyZWQoKSxcbiAgZmllbGRJZDogSm9pLm51bWJlcigpLFxuICBzdWJkb21haW46IEpvaS5zdHJpbmcoKVxuICAgIC5hbGxvdygnJylcbiAgICAuZGVmYXVsdCgnJyksXG4gIHRpY2tldEltcG9ydDogSm9pLm9iamVjdCh7XG4gICAgaW5Qcm9ncmVzczogSm9pLmJvb2xlYW4oKS5kZWZhdWx0KGZhbHNlKSxcbiAgICBuZXh0UGFnZTogSm9pLm51bWJlcigpLmRlZmF1bHQoMCksXG4gIH0pXG4gICAgLnVua25vd24oKVxuICAgIC5kZWZhdWx0KCksXG59KTtcblxuZXhwb3J0IHR5cGUgQWNjb3VudFNldHRpbmdQb3N0Qm9keVR5cGUgPSB7fFxuICBpbnRlZ3JhdGlvbnM/OiB7fFxuICAgIHplbkRlc2s6IHt8XG4gICAgICBjb25maWRlbmNlVGhyZXNob2xkczogeyBba2V5OiBzdHJpbmddOiBudW1iZXIgfSxcbiAgICB8fSxcbiAgfH0sXG4gIHR3aXR0ZXJTZWFyY2hlcz86IHN0cmluZ1tdLFxufH07XG5cbmV4cG9ydCBjb25zdCBBY2NvdW50U2V0dGluZ1Bvc3RCb2R5U2NoZW1hID0gSm9pLm9iamVjdCh7XG4gIGludGVncmF0aW9uczogSm9pLm9iamVjdCh7XG4gICAgemVuRGVzazogSm9pLm9iamVjdCh7XG4gICAgICBjb25maWRlbmNlVGhyZXNob2xkczogSm9pLm9iamVjdCgpXG4gICAgICAgIC5wYXR0ZXJuKC8uLywgSm9pLm51bWJlcigpKVxuICAgICAgICAucmVxdWlyZWQoKSxcbiAgICB9KSxcbiAgfSksXG4gIHR3aXR0ZXJTZWFyY2hlczogSm9pLmFycmF5KClcbiAgICAuaXRlbXMoSm9pLnN0cmluZygpKVxuICAgIC5kZWZhdWx0KCgpID0+IFtdLCAnRG8gbm90IGFsbG93IHVuZGVmaW5lZCBvciBudWxsIHRvIGNvbWUgb3V0IG9mIHRoZSBEQicpLFxufSlcbiAgLnVua25vd24oKVxuICAucmVxdWlyZWQoKTtcblxuZXhwb3J0IHR5cGUgQWNjb3VudFNldHRpbmdVbnNhdmVkVHlwZSA9IHt8XG4gIGFjY291bnRJZDogc3RyaW5nLFxuICBhcGlUb2tlbjogP3N0cmluZyxcbiAgZmVlZGJhY2tVc2FnZUJ5RGF0ZToge1xuICAgIFtrZXk6IFllYXJNb250aEJ1Y2tldFR5cGVdOiBudW1iZXIsXG4gIH0sXG4gIGludGVncmF0aW9uczoge1xuICAgIHplbkRlc2s6IFplbkRlc2tJbnRlZ3JhdGlvblR5cGUsXG4gIH0sXG4gIHRpZXI6IEFjY291bnRUaWVyVHlwZSxcbiAgdHdpdHRlclNlYXJjaGVzPzogc3RyaW5nW10sXG58fTtcblxuZXhwb3J0IHR5cGUgQWNjb3VudFNldHRpbmdUeXBlID0ge1xuICAuLi5BY2NvdW50U2V0dGluZ1Vuc2F2ZWRUeXBlLFxuICAuLi5Nb2RlbFNhdmVkRmllbGRzVHlwZSxcbn07XG5cbmV4cG9ydCBjb25zdCBBY2NvdW50U2V0dGluZ1NjaGVtYSA9IEpvaS5vYmplY3Qoe1xuICAuLi5Nb2RlbFNhdmVkRmllbGRzU2NoZW1hLFxuICBhcGlUb2tlbjogSm9pLnN0cmluZygpLmd1aWQoKSxcbiAgZmVlZGJhY2tVc2FnZUJ5RGF0ZTogSm9pLm9iamVjdCgpXG4gICAgLnBhdHRlcm4oXG4gICAgICBZZWFyTW9udGhCdWNrZXRSZWdleCxcbiAgICAgIEpvaS5udW1iZXIoKVxuICAgICAgICAubWluKDApXG4gICAgICAgIC5yZXF1aXJlZCgpXG4gICAgKVxuICAgIC5yZXF1aXJlZCgpLFxuICBpZDogSm9pLnN0cmluZygpLnJlcXVpcmVkKCksXG4gIGludGVncmF0aW9uczogSm9pLm9iamVjdCh7XG4gICAgemVuRGVzazogWmVuRGVza0ludGVncmF0aW9uU2NoZW1hLFxuICB9KS5kZWZhdWx0KCksXG4gIHRpZXI6IEpvaS5zdHJpbmcoKVxuICAgIC52YWxpZChbJ25vdEFwcHJvdmVkJywgJ2ZyZWUnXSlcbiAgICAuZGVmYXVsdCgnbm90QXBwcm92ZWQnKSxcbiAgdHdpdHRlclNlYXJjaGVzOiBKb2kuYXJyYXkoKVxuICAgIC5pdGVtcyhKb2kuc3RyaW5nKCkpXG4gICAgLmRlZmF1bHQoKCkgPT4gW10sICdEbyBub3QgYWxsb3cgdW5kZWZpbmVkIG9yIG51bGwgdG8gY29tZSBvdXQgb2YgdGhlIERCJyksXG59KVxuICAudW5rbm93bigpXG4gIC5yZXF1aXJlZCgpO1xuIl19